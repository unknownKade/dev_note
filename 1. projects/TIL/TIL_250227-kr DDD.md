밸류 -> 생성이 다른 객체의 생성에 의존된 경우 (예시 order - orderitem 이면 orderitem은 entity 객체가 아니라 value 객체로 이해)
### 도메인 주도

- RDS 관점에서 연관 관계가 맞지만 객체 관점에서 맞는지 고민이 필요
- 도메인 관점의 설계 -> 도메인 개념/구현 모델
![[Pasted image 20250227151229.png]]

![[Pasted image 20250227151327.png]]

- 연관관계인데 라이프 사이클이 다를 수 있다
	- 생명주기가 같으면 종속적인 관계 -> 주문을 만들 때 주문 아이템이 만들어진다
	- 생명주기각 다르면 독립적인 관계 -> 주문 아이템 만들 때 상품이 만들어지지 않는다
![[Pasted image 20250227151921.png]]
- 복잡성 대응은 도메인 별 계층
![[Pasted image 20250227152002.png]]



### 바운디드 컨텍스트
- 시스템을 여러 작은 컨텍스트로 나눔
- 컨텍스트 간에는 인터네핑스를 통해 상호작용
- 바운디드 컨텍스트 안에서 용어, 개념,규칙을 공유한다
- 바운디드 컨텍스트는 독립적으로 동작하도록 설계한다

- 컨텍스트를 분리하고 외부 컨텍스트와 소통할 때는 API를 사용
![[Pasted image 20250227152326.png]]

- 컨텍스트 안에서 계층 나눔
	- 으용 계층을
![[Pasted image 20250227152425.png]]

- 패키지 분리(모놀리식)
	- Rest, Service/Facade으로 통신
	- 옛니는 파사드
![[Pasted image 20250227152708.png]]
- API를 통해
![[Pasted image 20250227152733.png]]


- 공통 모듈
![[Pasted image 20250227152843.png]]

### 애그리거트 루트
- 애그리거트 : 도메인 모델에서 논리적인 단위 (객체들의 집합)
	- 같이 라이프 사이클을 공유하는 단위
	- 도메인 모델 내에서 일관성을 갖는 객체들
- 애그리거트 루트: 애그리거트를 대표하는 객체로 그 집합의 유일한 진입점(entry point)역으로 설정
	- 데이터 일관성 유지 -> 오직 루트로만 데이터 변경 (오더 상세는 오더 객체로만 수정)
	- 변경 범위(트랜잭션) 제어 -> 같은 애그리거트 안에선 한 트랜잭션으로 처리 
	- 
	- 엔티티 간 직접 참조를 방지 -> 결합도 낮춤
	- 데이터 저장소(Repository)와의 관계 정리
- 컨텍스트는 애그리거트의 더 큰 개념. 한 컨텍스트 안에 여러 애그리거트 있을 수 있음 (주문 다른 애그리거트 있을 수 있음)
![[Pasted image 20250227153348.png]]

- DDD 적용시 동시성이나 조회성능(자식들 다 조회해서 들고 올까봐) 신경 많이 써야할거같은데 팁이 있을까요?
	- 동시성은 MSA 라면 분산 락 + 낙관 락 조합, 조회는 LAZY 전략이나 쿼리 최적화 신경쓰는 방법이 있지 않을까요?


- [객체 설계](draw.io)해보기


바운디드 컨텍스트의 특징:  
바운디드 컨텍스트는 도메인을 컨텍스트로 나누어 서로 인터페이스로 소통하게 하며, 독립적이고 각자의 용어와 개념, 규칙을 공유합니다.  
명확한 경계:  
바운디드 컨텍스트는 특정 도메인 모델이나 비즈니스 로직이 유효한 범위를 정의합니다.  
이 경계 내에서 모델의 의미가 명확하고 일관되게 유지됩니다.  
독립적 설계:  
각 컨텍스트는 독립적으로 설계됩니다.  
즉 각 바운디드 컨텍스트는 독립된 도메인 모델을 가질 수 있으며, 이는 다른 바운디드 컨텍스트와 독립적으로 진화할 수 있습니다.  
이로 인해 서로 다른 컨텍스트에서 동일한 용어가 다른 의미를 가질 수 있습니다.  
인터페이스를 통한 소통:  
서로 다른 컨텍스트 간에는 명확하게 정의된 인터페이스를 통해 상호작용합니다.  
이는 REST API나 코드 레벨에서는 응용 계층을 활용한 서비스 또는 파사드 패턴을 통해 이루어질 수 있습니다.  
이로 인해 시스템의 복잡성을 줄이고, 각 컨텍스트의 변경이 다른 컨텍스트에 미치는 영향을 최소화할 수 있습니다.  
컨텍스트별 용어와 규칙:  
각 컨텍스트는 자체적인 용어, 개념, 규칙을 가집니다.  
이는 각 도메인 전문가와의 소통을 더 원활하게 합니다.  
독립적 동작:  
바운디드 컨텍스트는 독립적으로 동작해야 합니다.  
바운디드 컨텍스트 내에서는 도메인 모델의 일관성을 유지하고, 비즈니스 요구사항에 맞게 최적화할 수 있는 자유가 주어집니다.